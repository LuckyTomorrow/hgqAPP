<!doctype html>
<html>

<head>
    <meta charset="utf-8">
    <meta name="viewport" content="maximum-scale=1.0,minimum-scale=1.0,user-scalable=0,width=device-width,initial-scale=1.0" />
    <meta name="format-detection" content="telephone=no,email=no,date=no,address=no">
    <link rel="stylesheet" type="text/css" href="../css/aui.css" />
</head>

<body style="background-color:white">
    <header class="aui-bar aui-bar-nav" style="background-color:#EC425B;" id="aui-header">
        <a class="aui-btn aui-pull-left" tapmode onclick="closeWin();">
            <span class="aui-iconfont aui-icon-left"></span>
        </a>
        <div class="aui-title aui-font-size-16">话费充值</div>
    </header>

    <div class="aui-bar aui-bar-btn aui-bar-btn-sm aui-bar-btn-full aui-margin-t-10" style="background-color:#EC425B;" id='chongzhiType'>
        <div class="aui-bar-btn-item aui-active" tapmode onclick="cssChange(0);">中国移动</div>
        <div class="aui-bar-btn-item" tapmode onclick="cssChange(1);">中国联通</div>
        <div class="aui-bar-btn-item" tapmode onclick="cssChange(2);">中国电信</div>
    </div>
    <section class="aui-grid">
        <div class="aui-row">
            <div class="aui-col-xs-4" tapmode onclick="chongzhi(1);">
                <i class="aui-iconfont aui-icon-huafei aui-text-danger"></i>
                <div class="aui-grid-label">20元话费</div>
            </div>
            <div class="aui-col-xs-4" tapmode onclick="chongzhi(2);">
                <i class="aui-iconfont aui-icon-huafei aui-text-indigo"></i>
                <div class="aui-grid-label">30元话费</div>
            </div>
            <div class="aui-col-xs-4" tapmode onclick="chongzhi(3);">
                <i class="aui-iconfont aui-icon-huafei aui-text-info"></i>
                <div class="aui-grid-label">50元话费</div>
            </div>
            <div class="aui-col-xs-4" tapmode onclick="chongzhi(4);">
                <i class="aui-iconfont aui-icon-huafei aui-text-warning"></i>
                <div class="aui-grid-label">100元话费</div>
            </div>
            <div class="aui-col-xs-4" tapmode onclick="chongzhi(5);">
                <i class="aui-iconfont aui-icon-huafei aui-text-success"></i>
                <div class="aui-grid-label">200元话费</div>
            </div>
            <div class="aui-col-xs-4" tapmode onclick="chongzhi(6);">
                <i class="aui-iconfont aui-icon-huafei aui-text-pink"></i>
                <div class="aui-grid-label">300元话费</div>
            </div>
        </div>
    </section>


</body>
<script type="text/javascript" src="../script/api.js"></script>
<script src="http://res.wx.qq.com/open/js/jweixin-1.2.0.js"></script>
<script type="text/javascript">
    apiready = function() {
        api.parseTapmode();
        var header = $api.byId('aui-header');
        $api.fixStatusBar(header);

        api.addEventListener({
            name: 'keyback'
        }, function(ret, err) {
            api.closeWin();            
        });
    }

    function closeWin() {
        api.closeWin();
    }

    function chongzhi(_index) {
        var typeName = typeId + _index;
        api.openWin({
            name: 'chongzhiType',
            url: './chongzhiType.html',
            pageParam: {
                type: typeName
            }
        });
    }

    var typeId = 0;
    function cssChange(_index) {
        var chongzhiType = 　$api.byId('chongzhiType');
        var eFootLis = $api.domAll(chongzhiType, '.aui-bar-btn-item');

        for (var i = 0, len = eFootLis.length; i < len; i++) {
            $api.removeCls(eFootLis[i], 'aui-active');
            if (_index == i) {
                $api.addCls(eFootLis[i], 'aui-active');
                typeId = i*10;
            }
        }
    }
</script>

</html>
